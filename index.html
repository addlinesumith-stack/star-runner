<!DOCTYPE html><html><head><title>Star Runner - The Quest for the Golden Star</title><meta name="viewport" content="width=device-width,initial-scale=1"><style>*{margin:0;padding:0;box-sizing:border-box}body{background:#87CEEB;font-family:Arial,sans-serif;overflow:hidden}canvas{display:block;margin:0 auto;background:#87CEEB;image-rendering:pixelated}#ui{position:absolute;top:10px;left:10px;color:#fff;font-size:20px;text-shadow:2px 2px 4px #000;z-index:10}#story{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.9);color:#fff;padding:30px;border-radius:10px;max-width:600px;text-align:center;display:none;z-index:100}#story button{margin-top:20px;padding:10px 30px;font-size:18px;background:#4CAF50;color:white;border:none;border-radius:5px;cursor:pointer}#story button:hover{background:#45a049}#gameOver{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.9);color:#fff;padding:40px;border-radius:10px;text-align:center;display:none;z-index:100}#gameOver button{margin:10px;padding:10px 30px;font-size:18px;background:#2196F3;color:white;border:none;border-radius:5px;cursor:pointer}</style></head><body><div id="ui"><div>Level: <span id="level">1</span></div><div>Lives: <span id="lives">3</span></div><div>Score: <span id="score">0</span></div></div><div id="story"><h2 id="storyTitle"></h2><p id="storyText"></p><button onclick="closeStory()">Continue Adventure!</button></div><div id="gameOver"><h2 id="gameOverTitle"></h2><p id="gameOverText"></p><button onclick="restartGame()">Play Again</button><button onclick="location.reload()">Main Menu</button></div><canvas id="game"></canvas><script>const canvas=document.getElementById('game');const ctx=canvas.getContext('2d');canvas.width=800;canvas.height=600;const gravity=0.6;const friction=0.8;const jumpPower=13;let currentLevel=1;let lives=3;let score=0;let gameState='story';const stories=[{title:'The Beginning',text:'Long ago, the Golden Star protected our kingdom. An evil sorcerer stole it and scattered its fragments across dangerous lands. You are Star Runner, the chosen hero. Your quest: collect the star fragments and defeat the sorcerer!'},{title:'The Dark Forest',text:'You have conquered the Green Valley! But darker challenges await in the Haunted Forest. Strange creatures lurk in the shadows...'},{title:'The Volcanic Caves',text:'The forest trembles behind you! Now you must brave the scorching Volcanic Caves. Lava flows and fire demons block your path!'},{title:'The Final Battle',text:'Three fragments collected! The evil sorcerer awaits in his dark castle. This is your final test, brave hero!'}];const levels=[{name:'Green Valley',bg:'#87CEEB',ground:'#228B22',platforms:[[200,450,150,20],[450,380,150,20],[150,310,120,20],[550,280,100,20]],enemies:[{x:220,y:420,type:'walk',platform:[200,450,150,20]},{x:470,y:350,type:'walk',platform:[450,380,150,20]}],coins:[[230,400],[480,330],[180,260]],goal:{x:750,y:200}},{name:'Haunted Forest',bg:'#2F4F4F',ground:'#654321',platforms:[[100,450,120,20],[300,400,100,20],[500,350,120,20],[250,280,100,20],[600,250,100,20]],enemies:[{x:120,y:420,type:'walk',platform:[100,450,120,20]},{x:320,y:370,type:'fly'},{x:520,y:320,type:'walk',platform:[500,350,120,20]}],coins:[[130,400],[330,350],[540,300],[270,230]],goal:{x:650,y:180}},{name:'Volcanic Caves',bg:'#8B0000',ground:'#8B4513',platforms:[[150,480,100,20],[350,420,100,20],[200,350,100,20],[500,320,120,20],[350,250,100,20]],enemies:[{x:170,y:450,type:'walk',platform:[150,480,100,20]},{x:370,y:390,type:'fly'},{x:220,y:320,type:'walk',platform:[200,350,100,20]},{x:520,y:290,type:'fly'}],coins:[[180,430],[380,370],[230,300],[530,270],[370,200]],goal:{x:400,y:180}},{name:'Dark Castle',bg:'#191970',ground:'#696969',platforms:[[100,500,100,20],[300,450,100,20],[500,400,100,20],[250,330,100,20],[500,260,100,20],[150,200,100,20]],enemies:[{x:120,y:470,type:'walk',platform:[100,500,100,20]},{x:320,y:420,type:'fly'},{x:520,y:370,type:'walk',platform:[500,400,100,20]},{x:270,y:300,type:'fly'},{x:520,y:230,type:'walk',platform:[500,260,100,20]}],coins:[[130,450],[330,400],[540,350],[270,280],[540,210],[170,150]],goal:{x:200,y:130}}];class Player{constructor(){this.width=30;this.height=40;this.x=50;this.y=100;this.dx=0;this.dy=0;this.jumping=false;this.facingRight=true}update(){this.dy+=gravity;this.x+=this.dx;this.y+=this.dy;this.dx*=friction;if(this.x<0)this.x=0;if(this.x+this.width>canvas.width)this.x=canvas.width-this.width;if(this.y+this.height>canvas.height){this.y=canvas.height-this.height;this.dy=0;this.jumping=false}}draw(){ctx.fillStyle=this.facingRight?'#FF6347':'#FF4500';ctx.fillRect(this.x,this.y,this.width,this.height);ctx.fillStyle='#FFD700';ctx.fillRect(this.x+5,this.y+5,20,10);ctx.fillStyle='#000';ctx.fillRect(this.x+8,this.y+8,5,5);ctx.fillRect(this.x+17,this.y+8,5,5);ctx.fillRect(this.x+10,this.y+20,10,3)}}class Enemy{constructor(x,y,type,platform){this.width=30;this.height=30;this.x=x;this.y=y;this.type=type;this.dx=type==='fly'?1:2;this.dy=0;this.platform=platform;if(type==='walk'&&platform){this.minX=platform[0];this.maxX=platform[0]+platform[2]-this.width}else{this.moveRange=150;this.startX=x}}update(){if(this.type==='fly'){this.x+=this.dx;if(Math.abs(this.x-this.startX)>this.moveRange)this.dx*=-1}else{this.x+=this.dx;if(this.platform){if(this.x<=this.minX||this.x>=this.maxX)this.dx*=-1}else{if(Math.abs(this.x-this.startX)>100)this.dx*=-1}}}draw(){ctx.fillStyle=this.type==='fly'?'#8B008B':'#DC143C';ctx.fillRect(this.x,this.y,this.width,this.height);ctx.fillStyle='#000';ctx.fillRect(this.x+5,this.y+5,8,8);ctx.fillRect(this.x+17,this.y+5,8,8);if(this.type==='fly'){ctx.fillStyle='#DDA0DD';ctx.fillRect(this.x-10,this.y+10,10,5);ctx.fillRect(this.x+this.width,this.y+10,10,5)}}}class Coin{constructor(x,y){this.x=x;this.y=y;this.radius=10;this.collected=false}draw(){if(!this.collected){ctx.fillStyle='#FFD700';ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);ctx.fill();ctx.strokeStyle='#FFA500';ctx.lineWidth=2;ctx.stroke()}}}class Goal{constructor(x,y){this.x=x;this.y=y;this.width=40;this.height=40}draw(){ctx.fillStyle='#FFD700';ctx.beginPath();for(let i=0;i<5;i++){const angle=(Math.PI*2/5)*i-Math.PI/2;const x=this.x+Math.cos(angle)*20;const y=this.y+Math.sin(angle)*20;if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);const angle2=(Math.PI*2/5)*(i+0.5)-Math.PI/2;const x2=this.x+Math.cos(angle2)*8;const y2=this.y+Math.sin(angle2)*8;ctx.lineTo(x2,y2)}ctx.closePath();ctx.fill();ctx.strokeStyle='#FFA500';ctx.lineWidth=3;ctx.stroke()}}const player=new Player();let enemies=[];let coins=[];let goal;let keys={};function loadLevel(levelNum){const level=levels[levelNum-1];currentLevel=levelNum;enemies=level.enemies.map(e=>new Enemy(e.x,e.y,e.type,e.platform));coins=level.coins.map(c=>new Coin(c[0],c[1]));goal=new Goal(level.goal.x,level.goal.y);player.x=50;player.y=100;player.dx=0;player.dy=0;player.jumping=false;if(levelNum<=stories.length){showStory(levelNum-1)}}function showStory(index){document.getElementById('storyTitle').textContent=stories[index].title;document.getElementById('storyText').textContent=stories[index].text;document.getElementById('story').style.display='block';gameState='story'}function closeStory(){document.getElementById('story').style.display='none';gameState='playing'}function checkCollision(rect1,rect2){return rect1.x<rect2.x+rect2.width&&rect1.x+rect1.width>rect2.x&&rect1.y<rect2.y+rect2.height&&rect1.y+rect1.height>rect2.y}function loseLife(){lives--;if(lives<=0){gameState='gameOver';document.getElementById('gameOverTitle').textContent='Game Over';document.getElementById('gameOverText').textContent=`You collected ${score} coins! The kingdom needs a stronger hero.`;document.getElementById('gameOver').style.display='block'}else{player.x=50;player.y=100;player.dx=0;player.dy=0}}function restartGame(){lives=3;score=0;currentLevel=1;document.getElementById('gameOver').style.display='none';loadLevel(1)}function nextLevel(){if(currentLevel<levels.length){currentLevel++;loadLevel(currentLevel)}else{gameState='gameOver';document.getElementById('gameOverTitle').textContent='Victory!';document.getElementById('gameOverText').textContent=`Congratulations! You collected all ${score} star fragments and saved the kingdom! You are the true Star Runner!`;document.getElementById('gameOver').style.display='block'}}function update(){if(gameState!=='playing')return;player.update();const level=levels[currentLevel-1];level.platforms.forEach(plat=>{if(player.dy>=0&&player.y+player.height<=plat[1]+20&&player.y+player.height+player.dy>=plat[1]&&player.x+player.width>plat[0]&&player.x<plat[0]+plat[2]){player.y=plat[1]-player.height;player.dy=0;player.jumping=false}});enemies.forEach(enemy=>{enemy.update();if(checkCollision(player,enemy)){loseLife()}});coins.forEach(coin=>{if(!coin.collected){const dist=Math.sqrt((player.x+player.width/2-coin.x)**2+(player.y+player.height/2-coin.y)**2);if(dist<player.width/2+coin.radius){coin.collected=true;score+=10}}});if(checkCollision(player,{x:goal.x-20,y:goal.y-20,width:40,height:40})){nextLevel()}}function draw(){const level=levels[currentLevel-1];ctx.fillStyle=level.bg;ctx.fillRect(0,0,canvas.width,canvas.height);ctx.fillStyle=level.ground;ctx.fillRect(0,canvas.height-50,canvas.width,50);ctx.fillStyle=level.ground;level.platforms.forEach(plat=>{ctx.fillRect(plat[0],plat[1],plat[2],plat[3])});goal.draw();coins.forEach(coin=>coin.draw());enemies.forEach(enemy=>enemy.draw());player.draw();document.getElementById('level').textContent=currentLevel;document.getElementById('lives').textContent=lives;document.getElementById('score').textContent=score}function gameLoop(){update();draw();requestAnimationFrame(gameLoop)}document.addEventListener('keydown',e=>{keys[e.key]=true;if((e.key==='ArrowUp'||e.key===' ')&&!player.jumping&&gameState==='playing'){player.dy=-jumpPower;player.jumping=true}});document.addEventListener('keyup',e=>{keys[e.key]=false});setInterval(()=>{if(gameState==='playing'){if(keys['ArrowLeft']){player.dx=-5;player.facingRight=false}if(keys['ArrowRight']){player.dx=5;player.facingRight=true}}},1000/60);loadLevel(1);gameLoop();</script></body></html>
